{% extends "layouts/base.njk" %}
{% import "macros/_macros.njk" as macros %}

{% block title %}Product Reviews{% endblock %}
{% block content %}

{{ macros.breadcrumbs([
    {'title': 'Products', 'url': 'products.html'},
    {'title': 'Product Detail', 'url': 'product.html'},
    {'title': 'Reviews'}
]) }}

<!-- Product Review Header -->
<section class="container my-4">
    <div class="row align-items-center">
        <div class="col-lg-8">
            <h2 class="mb-0">Reviews for Premium Ankara Midi Dress</h2>
            <p class="text-muted">See what customers are saying about this product</p>
        </div>
        <div class="col-lg-4 text-lg-end mt-3 mt-lg-0">
            <button type="button" class="btn btn-dark" data-bs-toggle="modal" data-bs-target="#reviewModal">
                <i class="bi bi-pencil-square me-1"></i> Write a Review
            </button>
        </div>
    </div>
</section>

<!-- Reviews Content -->
<section class="container mb-5">
    <div class="row">
        <!-- Rating Summary -->
        <div class="col-lg-4 mb-4">
            <div class="card rating-card">
                <div class="card-body">
                    <div class="text-center mb-4">
                        <h2 class="display-4 fw-bold">4.5</h2>
                        <div class="text-warning mb-2">
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-fill"></i>
                            <i class="bi bi-star-half"></i>
                        </div>
                        <p class="text-muted">Based on 42 reviews</p>
                    </div>

                    <!-- Rating Distribution -->
                    <div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">5 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 70%"></div>
                            </div>
                            <span class="ms-2">70%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">4 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 20%"></div>
                            </div>
                            <span class="ms-2">20%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">3 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 7%"></div>
                            </div>
                            <span class="ms-2">7%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">2 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 2%"></div>
                            </div>
                            <span class="ms-2">2%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">1 star</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 1%"></div>
                            </div>
                            <span class="ms-2">1%</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- No rating card -->
            <div class="card rating-card d-none">
                <div class="card-body">
                    <div class="text-center mb-4">
                        <h2 class="display-4 fw-bold">0.0</h2>
                        <div class="text-secondary mb-2">
                            <i class="bi bi-star"></i>
                            <i class="bi bi-star"></i>
                            <i class="bi bi-star"></i>
                            <i class="bi bi-star"></i>
                            <i class="bi bi-star"></i>
                        </div>
                        <p class="text-muted">Based on 0 reviews</p>
                    </div>

                    <!-- Rating Distribution -->
                    <div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">5 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 0%"></div>
                            </div>
                            <span class="ms-2">0%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">4 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 0%"></div>
                            </div>
                            <span class="ms-2">0%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">3 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 0%"></div>
                            </div>
                            <span class="ms-2">0%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">2 stars</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 0%"></div>
                            </div>
                            <span class="ms-2">0%</span>
                        </div>
                        <div class="d-flex align-items-center mb-1">
                            <span class="me-2">1 star</span>
                            <div class="progress flex-grow-1" style="height: 10px;">
                                <div class="progress-bar bg-success" style="width: 0%"></div>
                            </div>
                            <span class="ms-2">0%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Review List -->
        <div class="col-lg-8">
            <!-- Sort Options -->
            <div class="card mb-3">
                <div class="card-body">
                    <div class="row align-items-center">
                        <div class="col-12">
                            <div class="d-flex align-items-center">
                                <label for="reviewSort" class="form-label me-2 mb-0">Sort by:</label>
                                <select class="form-select d-inline-block w-auto" id="reviewSort">
                                    <option selected>Most Recent</option>
                                    <option>Highest Rating</option>
                                    <option>Lowest Rating</option>
                                    <option>Most Helpful</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Review Items -->
            <div class="mb-3">
                {{ macros.reviewCard({
                    name: "Treasure Gift",
                    verified: true,
                    rating: 3,
                    title: "Perfect for my cousin's wedding!",
                    content: "I wore this dress to my cousin's traditional wedding in Enugu and received so many compliments! The fabric quality is excellent, and the fit was perfect. The pockets were a pleasant surprise - very practical for keeping my phone during the ceremony. Delivery to Port Harcourt was faster than expected too!",
                    date: "March 15, 2025",
                    helpful: 24,
                    unhelpful: 3
                }) }}
            </div>

            <div class="mb-3">
                {{ macros.reviewCard({
                    name: "Seyi Pythonian",
                    verified: false,
                    rating: 1,
                    title: "Horrible gift for my wife",
                    content: "Got this as a surprise for my wife's birthday. She loves it! The colors are vibrant and true to the pictures. Took away one star because it arrived a day late, but the quality makes up for it. The Pay on Delivery option in Lagos was inconvenient. I regret making this purchase.",
                    date: "March 11, 2025",
                    helpful: 0,
                    unhelpful: 1
                }) }}
            </div>

            <!-- No review empty state -->
            <div class="card d-none">
                <div class="card-body py-5">
                    <div class="text-center">
                        <i class="bi bi-chat-square-text fs-1 text-secondary mb-3"></i>
                        <h5>No Reviews Yet</h5>
                        <p class="text-muted mb-4">Be the first to share your experience with this product</p>
                        <button type="button" class="btn btn-dark" data-bs-toggle="modal"
                            data-bs-target="#reviewModal">
                            <i class="bi bi-pencil-square me-1"></i> Write a Review
                        </button>
                    </div>
                </div>
            </div>

            <!-- Load more button -->
            <div class="text-center mt-4">
                <a href="review.html" class="btn btn-dark px-4 py-2 rounded-5">Load more</a>
            </div>
        </div>
    </div>
</section>

{% include "modals/product_review_modal.njk" %}

{% endblock %}
